app-id: re.sonny.gigagram
runtime: org.gnome.Platform
runtime-version: "3.32"
sdk: org.gnome.Sdk
command: re.sonny.gigagram
finish-args:
  # network
  - "--share=network"
  # wayland
  - "--socket=wayland"
  # x11 fallback
  - "--socket=fallback-x11"
  # - "--share=ipc" needed?
  # - "--socket=x11" needed?
  # audio
  - "--socket=pulseaudio"
  # dconf support https://github.com/flatpak/flatpak/issues/78
  - "--filesystem=xdg-run/dconf"
  - "--filesystem=~/.config/dconf:ro"
  - "--talk-name=ca.desrt.dconf"
  - "--env=DCONF_USER_CONFIG_DIR=.config/dconf"
build-options:
  cflags: "-O2 -g"
  cxxflags: "-O2 -g"
  env:
    V: "1"
cleanup:
  - "/include"
  - "/lib/pkgconfig"
  - "/man"
  - "/share/doc"
  - "/share/gtk-doc"
  - "/share/man"
  - "/share/pkgconfig"
  - "*.la"
  - "*.a"
modules:
  - name: gigagram
    builddir: true
    buildsystem: meson
    sources:
      - type: git
        url: file:///home/sonny/Projects/gigagram
